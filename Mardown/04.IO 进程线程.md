# Linux编程基础

Linux系统编程本质：

学习第三方函数，学会使用man手册查询**函数三要素：**

> [1]函数功能
>
> [2]函数的参数
>
> [3]函数的返回值



重定向：改变默认的输入输出源

> 输出重定向 
>
> > 1>------标准输出重定向，会把原来的数据清除掉，也就是覆盖写入
> >
> > \>>------以追加的方式写入
>
> 错误重定向
>
> > 2>-------把输出到屏幕的错误信息，输出到文件中

IO：输入输出，就是信息处理系统（如计算机）和外部世界之间的通信



# IO模型

| IO模型   | 标准IO             | 文件IO     |
| -------- | ------------------ | ---------- |
| 层次     | 库函数             | 系统调用   |
| 缓存     | 有缓存             | 无缓存     |
| 操作对象 | 文件流             | 文件描述符 |
| 打开     | fopen              | open       |
| 读       | fgetc\fgets\fread  | read       |
| 写       | fputc\fputs\fwrite | write      |
| 定位     | fseek\ftell        | lseek      |
| 关闭     | fclose             | close      |



|                 | 标准输入文件 | 标准输出文件 | 标准出错文件 |
| --------------- | ------------ | ------------ | ------------ |
| 对应流指针FILE* | stdin        | stdout       | stderr       |
| 对应文件描述符  | 0            | 1            | 2            |



**<!--标准IO和文件IO都是对文件进行操作，但是方式不同，标准IO用流指针，文件IO用文件描述符-->**



##  标准IO

ANSI  C中定义的用于IO操作的一系列函数-----库函数

创建缓存区，围绕“流(stream)"展开一些列操作

> 流：数据输入输出的一种抽象描述，标准IO把一个打开的文件模型化为一个流
>
> FILE*本质上，对应一个打开文件信息的内存区首地址，FILE\*结构体指针，也称为流指针、文件指针

**优点 **：1、提高了程序的可移植性；2、减少系统调用的册数，提高系统效率

### printf函数簇[格式化的输出字符串]

`int printf(const char *format,...);`

返回打印的字符数

```c
int fprintf(FILE *stream,const char *format,...);
//功能：把本该输出至显示器的数据，改变输出流指向的位置

fprintf(stdout,"hello world");

int sprintf(char *str,const char *format,...);
//功能：把本该输出到屏幕的信息，改变输出位置，输出到str指针（数组首地址）所在位置
char buf[100] = {0};
sprintf(buf,"hello world\n");
```



### 标准IO的缓存区

作用：减少系统调用的次数，提高系统效率。

> 系统调用的时候，Linux必须从用户态切换到内核态，完成调用后，返回用户态
>
> 用户空间建立缓存区，独写操作时先操作缓存区，合适时间再使用系统调用访问实际的文件

缓存区是内存空间的一部分，有输入和输出两种。

缓存区分类：

> - 行缓存[1024byte]:输入输出是对**屏幕终端操作**
>
> > 1、缓存满的时候刷新
> >
> > 2、程序正常结束刷新缓存
> >
> > 3、调用`fflush();`函数强制刷新
> >
> > 4、遇到`\n`的时候刷新缓存
>
> - 全缓存[4096byte]：输入输出是对**文件的操作**
>
> > 1、缓存满刷新
> >
> > 2、程序正常结束刷新
> >
> > 3、调用`fflush();`函数刷新
>
> - 不缓存[0byte] 
>
> > 没有缓存，每次都是直接调用系统接口！ ------标准出错（stderr）

### 标准IO的文件打开关闭

### 标准IO的文件读写

### 标准IO的文件定位



## 文件IO



### 对普通文件操作

### 对目录文件操作



#  进程线程

## 进程

### 程序与进程：

### 进程的组成：

### 进程的表示：

### 进程的分类：

### 进程相关命令：

### 虚拟地址和物理地址

### 进程间通信方式

唯一的异步通信方式：信号

## 线程



## 线程死锁



## 写时拷贝技术 vfork

